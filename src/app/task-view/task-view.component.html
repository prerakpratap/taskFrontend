

<div class="container-fluid px-0" style="margin-top: 20px;">
  <div class="back-container">

      <div class="row mx-0 px-3 mb-5" style="margin-top: -2%" >
          <div class="col-sm-12">
              <div class="row">
                  <div class="col-sm-12 mb-4 mt-3">
                      <div class="card mx-0">
                          <div class="card-header py-2">
                              <h3 class="card-header-content my-0 text-center">
                                  <span><i class="i-File-Edit" style="vertical-align: middle"></i></span>
                                  <label class="ml-1 my-0 py-2">Task Data</label>
                                  <button matTooltip="Reload Data" type="submit" style="float: right;"   mat-raised-button color="primary"  (click)="reloadData()" >Reload</button>
                              </h3>
                          </div>
                          <div class="card-header py-2" *ngIf="tableData.length == 0">
                            <h3 class="card-header-content my-0 text-center">
                                <span><i class="i-File-Edit" style="vertical-align: middle"></i></span>
                                <label class="ml-1 my-0 py-2">No Task Data</label>
                            </h3>
                        </div>
                          <div class="card-content w-100" *ngIf="tableData.length >0">
          
                      <div class="row mx-0 mb-3"  >
                                  <!-- filter -->
                                  <div class="col-sm-12 mb-3">
                                      <div class="form-group row text-sm-right d-flex justify-content-center" style="margin-top: 10px;">
                                          <div class="col-sm-6" >
                                              <input type="text" (keyup)="applyFilter($event)" placeholder="search" class="form-control" #input />
                                          </div>
                                      </div>
                                  </div>

                                  <!-- history table -->
                                  <div class="col-sm-12">
                                      <div class="table-responsive" style="max-height: 33vh; overflow-y: auto;overflow-x: auto;" >
                                          <table class="table-hover w-100" mat-table [dataSource]="dataSource" style="    background: white;
    border: 2px solid;">
                                              <!-- table header -->
                                              <tr mat-header-row *matHeaderRowDef="historyColumns; sticky: true"></tr>

                                              <!-- table rows -->
                                              <tr mat-row *matRowDef="let row; columns: historyColumns"></tr>
                                              <!-- <tr mat-footer-row *matFooterRowDef="historyColumns; sticky: true"></tr> -->

                                              <!-- table container -->
                                              <ng-container *ngFor="let column of historyColumns; let i = index">
                                                  <ng-container [matColumnDef]="column">
                                                      <th mat-header-cell *matHeaderCellDef class="px-3" style="white-space: nowrap; color: #545556">{{ displayedColumns[column] }}</th>
                                                      <td mat-cell *matCellDef="let row" class="px-3" style="color: #545556">  
                                                          <span *ngIf="displayedColumns[column] == 'ACTION'">
                                                              <button class="btn btn-primary btn-sm px-3" style="margin: 5px 0px;" (click)="getDetails(row)" >Edit</button>
                                                             
                                                          </span>
                                                          <span *ngIf="displayedColumns[column] == 'DELETE'">
                                                            <button mat-fab aria-label="Example icon button with a delete icon"   style="margin: 5px 0px;" (click)="deletetask(row)" >
                                                              <mat-icon>delete</mat-icon>
                                                            </button>
                                                        </span>
                                                          <span *ngIf="displayedColumns[column] !== 'ACTION'">
                                                              {{ row[historyColumns[i]] }}
                                                          </span>
                                                      </td>
                                                  </ng-container>
                                              </ng-container>
                                              
                                          </table>
                                      </div>
                                  </div>

                                  <!-- paginator -->
                                  <div class="col-sm-12">
                                      <mat-paginator #paginator [length]="pageLength"  [pageSizeOptions]="[10, 50, 100]" aria-label="Select page" showFirstLastButtons></mat-paginator>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      </div><div id="cover-spin" *ngIf="loader === true"></div>

  </div>
